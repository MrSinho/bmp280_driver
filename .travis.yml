language: c
compiler: gcc

os: linux
dist: xenial
sudo: require

before_script:
  - sudo apt-get install -y gcc cmake make gcc-arm-none-eabi libnewlib-arm-none-eabi libstdc++-arm-none-eabi-newlib
  - sudo apt-get install build-essential
  - wget http://www.cmake.org/files/v3.13/cmake-3.13.3.tar.gz
  - tar xf cmake-3.13.3.tar.gz
  - cd cmake-3.13.3
  - ./configure
  - make
  - mkdir build
  - cd build
  - sed -i '6d' ../externals/pico-sdk/src/rp2_common/pico_standard_link/CMakeLists.txt

script:
  - cmake -DBMP280_DRIVER_BUILD_EXAMPLE=ON ..
  - cmake --build .